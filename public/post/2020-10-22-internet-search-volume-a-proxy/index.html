<!doctype html>
<html lang="en-us">
  <head>
    <title>Internet Search Volume: A Proxy // Productive Procastination</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.76.5" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Under " />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://biolysthome.netlify.app/css/main.min.88e7083eff65effb7485b6e6f38d10afbec25093a6fac42d734ce9024d3defbd.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Internet Search Volume: A Proxy"/>
<meta name="twitter:description" content="Introduction Internet search volume and web page hits can provide interesting insights into the collective unconscious (read the minds of bored 20 - somethings on furlough)
This is nice quick introduction to two straight forward packages, googletrendsR and wikipediatrend.
There will also be a cursory flirt with Facebook&rsquo;s Prophet, a forecasting package.
So lets call in our libraries
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ options(scipen = 999) library(gtrendsR) library(tidyverse) library(ggcharts) library(ggsci) library(ggthemes) Google Trends The query requires a few different arguments which we can define before hand."/>

    <meta property="og:title" content="Internet Search Volume: A Proxy" />
<meta property="og:description" content="Introduction Internet search volume and web page hits can provide interesting insights into the collective unconscious (read the minds of bored 20 - somethings on furlough)
This is nice quick introduction to two straight forward packages, googletrendsR and wikipediatrend.
There will also be a cursory flirt with Facebook&rsquo;s Prophet, a forecasting package.
So lets call in our libraries
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ options(scipen = 999) library(gtrendsR) library(tidyverse) library(ggcharts) library(ggsci) library(ggthemes) Google Trends The query requires a few different arguments which we can define before hand." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://biolysthome.netlify.app/post/2020-10-22-internet-search-volume-a-proxy/" />
<meta property="article:published_time" content="2020-10-22T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-10-22T00:00:00+00:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://biolysthome.netlify.app/"><img class="app-header-avatar" src="/avatar.jpg" alt="Under " /></a>
      <h1>Productive Procastination</h1>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
      </nav>
      <p>A Biologist Wandering the World of Analytics.</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/gohugoio" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/gohugoio" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Internet Search Volume: A Proxy</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Oct 22, 2020
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          7 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <h2 id="introduction">Introduction</h2>
<p>Internet search volume and web page hits can provide interesting insights into the collective unconscious (read the minds of bored 20 - somethings on furlough)</p>
<p>This is nice quick introduction to two straight forward packages, <code>googletrendsR</code> and <code>wikipediatrend</code>.</p>
<p>There will also be a cursory flirt with Facebook&rsquo;s <code>Prophet</code>, a forecasting package.</p>
<p>So lets call in our libraries</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#6272a4">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span style="color:#50fa7b">options</span>(scipen <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">999</span>)
<span style="color:#50fa7b">library</span>(gtrendsR)
<span style="color:#50fa7b">library</span>(tidyverse)
<span style="color:#50fa7b">library</span>(ggcharts)
<span style="color:#50fa7b">library</span>(ggsci)
<span style="color:#50fa7b">library</span>(ggthemes)
</code></pre></div><h2 id="google-trends">Google Trends</h2>
<p>The query requires a few different arguments which we can define before hand.
The <code>+</code> between the terms in the keyword vector ensures that those words appear in that order.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#6272a4">#define the keywords</span>
keywords <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">c</span>(<span style="color:#f1fa8c">&#39;Artificial+neural+network&#39;</span>)
<span style="color:#6272a4"># Choose Location  --------------------------------------------------------</span>
country<span style="color:#ff79c6">=</span><span style="color:#50fa7b">c</span>(<span style="color:#f1fa8c">&#39;GB&#39;</span>)
<span style="color:#6272a4"># Define Time Fram -------------------------------------------------</span>
time_frame <span style="color:#ff79c6">=</span> (<span style="color:#f1fa8c">&#34;2014-01-01 2020-05-30&#34;</span>)
<span style="color:#6272a4">#set channels </span>
channel<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;web&#39;</span>
</code></pre></div><p>Here we have the final query, which will return us a <code>list</code> of <code>dataframes</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">trends  <span style="color:#ff79c6">&lt;-</span>  <span style="color:#50fa7b">gtrends</span>(keywords, gprop <span style="color:#ff79c6">=</span> channel, geo <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;GB&#39;</span>, time <span style="color:#ff79c6">=</span> time_frame )
<span style="color:#50fa7b">str</span>(trends)
</code></pre></div><pre><code>## List of 7
##  $ interest_over_time :'data.frame':	77 obs. of  7 variables:
##   ..$ date    : POSIXct[1:77], format: &quot;2014-01-01&quot; &quot;2014-02-01&quot; ...
##   ..$ hits    : int [1:77] 89 91 89 85 82 82 84 83 86 87 ...
##   ..$ keyword : chr [1:77] &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; ...
##   ..$ geo     : chr [1:77] &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; ...
##   ..$ time    : chr [1:77] &quot;2014-01-01 2020-05-30&quot; &quot;2014-01-01 2020-05-30&quot; &quot;2014-01-01 2020-05-30&quot; &quot;2014-01-01 2020-05-30&quot; ...
##   ..$ gprop   : chr [1:77] &quot;web&quot; &quot;web&quot; &quot;web&quot; &quot;web&quot; ...
##   ..$ category: int [1:77] 0 0 0 0 0 0 0 0 0 0 ...
##  $ interest_by_country: NULL
##  $ interest_by_region :'data.frame':	4 obs. of  5 variables:
##   ..$ location: chr [1:4] &quot;England&quot; &quot;Scotland&quot; &quot;Wales&quot; &quot;Northern Ireland&quot;
##   ..$ hits    : int [1:4] 100 96 91 78
##   ..$ keyword : Factor w/ 1 level &quot;Artificial + neural + network&quot;: 1 1 1 1
##   ..$ geo     : chr [1:4] &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; &quot;GB&quot;
##   ..$ gprop   : chr [1:4] &quot;web&quot; &quot;web&quot; &quot;web&quot; &quot;web&quot;
##  $ interest_by_dma    : NULL
##  $ interest_by_city   :'data.frame':	97 obs. of  5 variables:
##   ..$ location: chr [1:97] &quot;Milton Keynes&quot; &quot;Cambridge&quot; &quot;Reading&quot; &quot;Warrington&quot; ...
##   ..$ hits    : int [1:97] NA 100 94 NA NA 91 NA NA NA NA ...
##   ..$ keyword : Factor w/ 1 level &quot;Artificial + neural + network&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ geo     : chr [1:97] &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; ...
##   ..$ gprop   : chr [1:97] &quot;web&quot; &quot;web&quot; &quot;web&quot; &quot;web&quot; ...
##  $ related_topics     :'data.frame':	44 obs. of  6 variables:
##   ..$ subject       : chr [1:44] &quot;100&quot; &quot;21&quot; &quot;21&quot; &quot;11&quot; ...
##   ..$ related_topics: chr [1:44] &quot;top&quot; &quot;top&quot; &quot;top&quot; &quot;top&quot; ...
##   ..$ value         : chr [1:44] &quot;Computer network&quot; &quot;Network Rail&quot; &quot;Rail transport&quot; &quot;Artificial turf&quot; ...
##   ..$ geo           : chr [1:44] &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; ...
##   ..$ keyword       : chr [1:44] &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; ...
##   ..$ category      : int [1:44] 0 0 0 0 0 0 0 0 0 0 ...
##   ..- attr(*, &quot;reshapeLong&quot;)=List of 4
##   .. ..$ varying:List of 1
##   .. .. ..$ value: chr &quot;top&quot;
##   .. .. ..- attr(*, &quot;v.names&quot;)= chr &quot;value&quot;
##   .. .. ..- attr(*, &quot;times&quot;)= chr &quot;top&quot;
##   .. ..$ v.names: chr &quot;value&quot;
##   .. ..$ idvar  : chr &quot;id&quot;
##   .. ..$ timevar: chr &quot;related_topics&quot;
##  $ related_queries    :'data.frame':	50 obs. of  6 variables:
##   ..$ subject        : chr [1:50] &quot;100&quot; &quot;48&quot; &quot;31&quot; &quot;31&quot; ...
##   ..$ related_queries: chr [1:50] &quot;top&quot; &quot;top&quot; &quot;top&quot; &quot;top&quot; ...
##   ..$ value          : chr [1:50] &quot;network rail&quot; &quot;artificial grass&quot; &quot;cartoon network&quot; &quot;cartoon&quot; ...
##   ..$ geo            : chr [1:50] &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; &quot;GB&quot; ...
##   ..$ keyword        : chr [1:50] &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; &quot;Artificial+neural+network&quot; ...
##   ..$ category       : int [1:50] 0 0 0 0 0 0 0 0 0 0 ...
##   ..- attr(*, &quot;reshapeLong&quot;)=List of 4
##   .. ..$ varying:List of 1
##   .. .. ..$ value: chr &quot;top&quot;
##   .. .. ..- attr(*, &quot;v.names&quot;)= chr &quot;value&quot;
##   .. .. ..- attr(*, &quot;times&quot;)= chr &quot;top&quot;
##   .. ..$ v.names: chr &quot;value&quot;
##   .. ..$ idvar  : chr &quot;id&quot;
##   .. ..$ timevar: chr &quot;related_queries&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;gtrends&quot; &quot;list&quot;
</code></pre><p>We can access the elements of the list we would like and assign them to a variable. I have creatively named them as seen below.</p>
<p>The city data seems quite suspect to me and is undoubtedly a case of search locations being grouped to the nearest
&lsquo;city&rsquo;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">time_trend <span style="color:#ff79c6">&lt;-</span> trends<span style="color:#ff79c6">$</span>interest_over_time

city <span style="color:#ff79c6">&lt;-</span> trends<span style="color:#ff79c6">$</span>interest_by_city
</code></pre></div><h3 id="process-and-plot">Process and plot</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#6272a4"># A little bit of cleaning ------------------------------------------------</span>
<span style="color:#50fa7b">library</span>(forcats)
city <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">na.omit</span>(city)
<span style="color:#6272a4"># Lets take a look --------------------------------------------------------</span>
<span style="color:#50fa7b">ggplot</span>(city, <span style="color:#50fa7b">aes</span>( <span style="color:#50fa7b">reorder</span>(location, hits), hits)) <span style="color:#ff79c6">+</span>
<span style="color:#50fa7b">geom_col</span>(fill <span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;#E69F00&#34;</span>, show.legend <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">FALSE</span>) <span style="color:#ff79c6">+</span>
<span style="color:#50fa7b">coord_flip</span>() <span style="color:#ff79c6">+</span>
<span style="color:#50fa7b">labs</span>(title <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Search Results By Approx Location&#39;</span>,
        y <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Relative Interest&#39;</span>,
        x <span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;Approx Locations&#39;</span>,
       caption <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Sys.Date</span>()) <span style="color:#ff79c6">+</span>
<span style="color:#50fa7b">theme_hermit</span>()
</code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#6272a4"># CAUTION: This step is only undertaken to ensure better plotting  --------</span>
time_trend<span style="color:#ff79c6">$</span>hits[time_trend<span style="color:#ff79c6">$</span>hits <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#39;&lt;1&#39;</span>] <span style="color:#ff79c6">&lt;-</span> <span style="color:#bd93f9">0</span>

time_trend<span style="color:#ff79c6">$</span>hits <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">as.numeric</span>(time_trend<span style="color:#ff79c6">$</span>hits)

<span style="color:#50fa7b">glimpse</span>(time_trend)
</code></pre></div><pre><code>## Rows: 77
## Columns: 7
## $ date     &lt;dttm&gt; 2014-01-01, 2014-02-01, 2014-03-01, 2014-04-01, 2014-05-0...
## $ hits     &lt;dbl&gt; 89, 91, 89, 85, 82, 82, 84, 83, 86, 87, 91, 100, 90, 87, 8...
## $ keyword  &lt;chr&gt; &quot;Artificial+neural+network&quot;, &quot;Artificial+neural+network&quot;, ...
## $ geo      &lt;chr&gt; &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;, &quot;GB&quot;...
## $ time     &lt;chr&gt; &quot;2014-01-01 2020-05-30&quot;, &quot;2014-01-01 2020-05-30&quot;, &quot;2014-01...
## $ gprop    &lt;chr&gt; &quot;web&quot;, &quot;web&quot;, &quot;web&quot;, &quot;web&quot;, &quot;web&quot;, &quot;web&quot;, &quot;web&quot;, &quot;web&quot;, &quot;w...
## $ category &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#50fa7b">ggplot</span>(time_trend, <span style="color:#50fa7b">aes</span>(x<span style="color:#ff79c6">=</span>date, y<span style="color:#ff79c6">=</span>hits,group<span style="color:#ff79c6">=</span>keyword,col<span style="color:#ff79c6">=</span>keyword))<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">geom_line</span>(size<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span>,col <span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;#E69F00&#34;</span>)<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">xlab</span>(<span style="color:#f1fa8c">&#39;Time&#39;</span>)<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">ylab</span>(<span style="color:#f1fa8c">&#39;Relative Interest&#39;</span>)<span style="color:#ff79c6">+</span> 
  <span style="color:#50fa7b">theme_hermit</span>()<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">theme</span>(legend.title <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">element_blank</span>(),legend.position<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;right&#34;</span>,legend.text<span style="color:#ff79c6">=</span><span style="color:#50fa7b">element_text</span>(size<span style="color:#ff79c6">=</span><span style="color:#bd93f9">12</span>))<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">ggtitle</span>(<span style="color:#f1fa8c">&#39;Interest in Artificial Neural Networks since 2014&#39;</span>) <span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">scale_color_viridis_d</span>()
</code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<h1 id="lets-do-something-similar-this-time-in-wikipedia">Lets do something similar this time in Wikipedia</h1>
<p>Using Wikipedia Trend</p>
<p>The first thing we will do is create the query. Note that you will have to ensure
that the wikipedia you want exists and that you have written it as it appears in
actual URL.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#50fa7b">library</span>(wikipediatrend)
</code></pre></div><pre><code>## Warning: package 'wikipediatrend' was built under R version 3.6.3
</code></pre><pre><code>## 
##   [wikipediatrend]
##     
##   Note:
##     
##     - Data before 2016-01-01 
##       * is provided by petermeissner.de and
##       * was prepared in a project commissioned by the Hertie School of Governance (Prof. Dr. Simon Munzert)
##       * and supported by the Daimler and Benz Foundation.
##     
##     - Data from 2016-01-01 onwards 
##       * is provided by the Wikipedia Foundation
##       * via its pageviews package and API.
## 
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">wiki_search <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">wp_trend</span>(page <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Artificial_neural_network&#39;</span>,
         from <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;2014-01-01&#39;</span>,
         to <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Sys.Date</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">wiki_search <span style="color:#ff79c6">%&gt;%</span> 
  <span style="color:#50fa7b">ggplot</span>(<span style="color:#50fa7b">aes</span>(date,views,col<span style="color:#ff79c6">=</span>article),show.legend<span style="color:#ff79c6">=</span><span style="color:#ff79c6">FALSE</span>) <span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">geom_line</span>(size<span style="color:#ff79c6">=</span><span style="color:#bd93f9">0.5</span>,show.legend <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">FALSE</span>)<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">geom_smooth</span>(<span style="color:#50fa7b">aes</span>(col<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;#E69F00&#34;</span>,se <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">FALSE</span>,),show.legend<span style="color:#ff79c6">=</span><span style="color:#ff79c6">FALSE</span>)<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">theme_hermit</span>() <span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">scale_y_continuous</span>(labels <span style="color:#ff79c6">=</span> scales<span style="color:#ff79c6">::</span>comma)<span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">scale_color_viridis_d</span>() <span style="color:#ff79c6">+</span>
  <span style="color:#50fa7b">labs</span>(title <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;Wikipedia Page Views Since Jan 2014&#39;</span>)
</code></pre></div><pre><code>## Warning: Ignoring unknown aesthetics: se
</code></pre><pre><code>## `geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = &quot;cs&quot;)'
</code></pre><p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<h1 id="lets-try-some-forecasting">Lets try some forecasting</h1>
<h2 id="be-it-a-very-quick-and-dirty-forecast">Be it a very quick and dirty forecast</h2>
<p>Facebook&rsquo;s Prophet requires two columns with specific names <code>ds</code> and <code>y</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#50fa7b">library</span>(prophet)
</code></pre></div><pre><code>## Warning: package 'prophet' was built under R version 3.6.3
</code></pre><pre><code>## Loading required package: Rcpp
</code></pre><pre><code>## Warning: package 'Rcpp' was built under R version 3.6.3
</code></pre><pre><code>## Loading required package: rlang
</code></pre><pre><code>## Warning: package 'rlang' was built under R version 3.6.3
</code></pre><pre><code>## 
## Attaching package: 'rlang'
</code></pre><pre><code>## The following objects are masked from 'package:purrr':
## 
##     %@%, as_function, flatten, flatten_chr, flatten_dbl, flatten_int,
##     flatten_lgl, flatten_raw, invoke, list_along, modify, prepend,
##     splice
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">ds <span style="color:#ff79c6">&lt;-</span> time_trend<span style="color:#ff79c6">$</span>date
y <span style="color:#ff79c6">&lt;-</span> time_trend<span style="color:#ff79c6">$</span>hits
</code></pre></div><p>you can then combine both into a <code>dataframe</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">df <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">data.frame</span>(ds,y)
</code></pre></div><p>Make a prophet object</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">m <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">prophet</span>(df,weekly.seasonality <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">TRUE</span>)
</code></pre></div><pre><code>## Disabling daily seasonality. Run prophet with daily.seasonality=TRUE to override this.
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#50fa7b">class</span>(m)
</code></pre></div><pre><code>## [1] &quot;prophet&quot; &quot;list&quot;
</code></pre><p>How far you want to forecast, <code>periods</code> is in days</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">future <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">make_future_dataframe</span>(m, periods <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">365</span>)
</code></pre></div><p>Use the native predict function</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">forecast <span style="color:#ff79c6">&lt;-</span> <span style="color:#50fa7b">predict</span>(m, future)
</code></pre></div><p>Use <code>Base R</code> for some plotting</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#50fa7b">plot</span>(m, forecast)
</code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-14-1.png" width="672" />
View the decomp</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#50fa7b">prophet_plot_components</span>(m, forecast)
</code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>This has been quite a quick and dirty  forecast and should without a doubt
<strong>NOT</strong> be considered a true reflection of patterns.</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
